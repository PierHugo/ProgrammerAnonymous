<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
>
<ui:insert name="metadata"/>
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>
        Guestbook
    </title>
    <ui:include src="header.xhtml"></ui:include>
</h:head>
<h:body>

    <div class="heading text-center pt-4">
        <h3 class="card-title">Guestbook</h3>
    </div>

    <div class="container" id="addcommentcontainer">
        <div class="heading">
            <h4>Add Comment</h4>
        </div>
        <h:form id="comment">
            <div class="row">
                <div class="input-field">
                    <h:inputText id="author" value="#{postcommentBean.comment.author}" required="true" type="text"
                                 name="author" class="validate"/>
                    <label for="author">Author</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field">
                    <h:inputText id="comment" value="#{postcommentBean.comment.comment}" required="true" type="text"
                                 name="comment" class="validate"/>
                    <label for="comment">Comment</label>
                </div>
            </div>
            <div class="row">
                <h:commandButton class="btn waves-effect waves-light deep-orange darken-2" value="comment"
                                 action="#{postcommentBean.addComment}">
                </h:commandButton>
            </div>
        </h:form>
    </div>

    <div class="container" id="listtopcommentcontainer">
        <ul class="collection with-header">
            <li class="collection-header">
                <h4>Top Comments</h4>
            </li>
            <ui:repeat size="2" value="#{guestbookBean.topcom}" var="topcom">
                <li class="collection-item">
                    <author>
                        #{topcom.author}
                    </author>
                    <date>
                        #{topcom.commentDate}
                    </date>
                    <comment>
                        #{topcom.comment}
                    </comment>
                    <like>
                        #{topcom.likes}
                    </like>
                </li>
            </ui:repeat>
        </ul>
    </div>

    <div class="container" id="listcommentcontainer">
        <ul class="collection with-header">
            <li class="collection-header">
                <h4>Comments</h4>
            </li>
            <ui:repeat value="#{guestbookBean.comments}" var="comment">
                <li class="collection-item">
                    <author>
                        #{comment.author}
                    </author>
                    <date>
                        #{comment.commentDate}
                    </date>
                    <comment>
                        #{comment.comment}
                    </comment>
                    <like>
                        #{comment.likes}
                    </like>
                    <h:commandButton class="btn waves-effect waves-light deep-orange darken-2" value="Like"
                                     action="#{guestbookBean.addLike(comment.author)}">
                    </h:commandButton>
                </li>
            </ui:repeat>
        </ul>
    </div>

</h:body>
<ui:include src="footer.xhtml"></ui:include>
</html>